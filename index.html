<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Revir - HTML Uygulama</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Entry/Splash Screen -->
    <div id="entryScreen" class="entry-screen">
        <div class="entry-content">
            <h1>Revir Muayene Sistemi</h1>
            <p class="entry-description">Hasta muayene listesi ve takvim yÃ¶netimi</p>
            <button id="enterAppBtn" class="btn btn-primary btn-large">
                Muayene Listesi ProgramÄ±na GiriÅŸ
            </button>
            <div id="loadingStatus" class="loading-status"></div>
        </div>
    </div>

    <div class="container" id="mainApp" style="display: none;">
        <header>
            <h1>Revir UygulamasÄ±</h1>
            <button id="themeToggleBtn" class="theme-toggle-btn" title="Tema DeÄŸiÅŸtir">ğŸŒ™</button>
        </header>

        <nav class="tab-nav">
            <button class="tab-btn active" data-tab="muayene">Muayene Listesi</button>
            <button class="tab-btn" data-tab="takvim">Takvim</button>
            <button class="tab-btn" data-tab="sorgula">Sorgula</button>
        </nav>

        <div id="takvimTab" class="tab-content" style="display:none;">
            <section class="card">
                <div class="takvim-header">
                    <button id="oncekiAyBtn" class="btn btn-secondary">â—€</button>
                    <h2 id="takvimBaslik"></h2>
                    <button id="sonrakiAyBtn" class="btn btn-secondary">â–¶</button>
                </div>
                <div id="takvimGrid" class="takvim-grid"></div>
            </section>
            <section id="gunDetaySection" class="card gun-detay-section" style="display:none;">
                <h3 id="gunDetayBaslik"></h3>
                <div id="gunMuayeneListesi" class="muayene-listesi">
                    <p class="empty-message">Bu gÃ¼n iÃ§in kayÄ±t yok.</p>
                </div>
                <div class="gun-detay-ekle">
                    <h4>KiÅŸi Ekle</h4>
                    <div class="search-wrapper">
                        <input type="text" id="takvimHastaAraInput" class="input-field" placeholder="Hasta adÄ± yazÄ±n veya tam isim giriniz..." autocomplete="off">
                        <div id="takvimOneriListesi" class="oneri-listesi"></div>
                    </div>
                    <button id="takvimManuelEkleBtn" class="btn btn-primary" style="margin-top: 10px;">Manuel Ekle</button>
                </div>
            </section>
            <section class="card bulk-import-section">
                <h3>Toplu Liste Ä°Ã§e Aktar</h3>
                <p class="help-text">MBYS hasta listesini buraya yapÄ±ÅŸtÄ±rÄ±n (TC, Ad Soyad ve Tarih bilgileri otomatik Ã§Ä±karÄ±lÄ±r)</p>
                <textarea id="bulkImportText" class="bulk-import-textarea" placeholder="Hasta listesini buraya yapÄ±ÅŸtÄ±rÄ±n..."></textarea>
                <button id="bulkImportBtn" class="btn btn-success">Listeyi Ä°Ã§e Aktar</button>
                <div id="bulkImportStatus" class="import-status"></div>
            </section>
        </div>

        <div id="sorgulaTab" class="tab-content" style="display:none;">
            <section class="card">
                <h2>KiÅŸi Sorgula</h2>
                <p class="help-text">KiÅŸinin adÄ±nÄ± yazarak muayeneye Ã§Ä±ktÄ±ÄŸÄ± tarihleri gÃ¶rÃ¼ntÃ¼leyin.</p>
                <div class="search-wrapper">
                    <input type="text" id="sorgulaHastaAraInput" class="input-field" placeholder="Hasta adÄ± yazÄ±n..." autocomplete="off">
                    <div id="sorgulaOneriListesi" class="oneri-listesi"></div>
                </div>
                <div id="sorgulaKisiSonuc" class="sorgula-sonuc"></div>
            </section>
            <section class="card" style="margin-top:20px;">
                <h2>KoÄŸuÅŸ Sorgula</h2>
                <p class="help-text">KoÄŸuÅŸ seÃ§erek son 1 ve 2 haftada kim kaÃ§ kere muayeneye Ã§Ä±kmÄ±ÅŸ gÃ¶rÃ¼ntÃ¼leyin.</p>
                <select id="sorgulaKogusSelect" class="input-field">
                    <option value="">-- KoÄŸuÅŸ SeÃ§in --</option>
                </select>
                <div id="sorgulaKogusSonuc" class="sorgula-sonuc"></div>
            </section>
        </div>

        <div id="muayeneTab" class="tab-content">

        <section class="card xml-upload-section">
            <h2>XML/JSON DosyasÄ± YÃ¼kle</h2>
            <div class="upload-container">
                <label for="xmlFileInput" class="upload-area" id="uploadArea" tabindex="0">
                    <span class="upload-icon">ğŸ“</span>
                    <span class="upload-text">Tasnif XML veya hastalar JSON dosyasÄ±nÄ± seÃ§mek iÃ§in tÄ±klayÄ±n veya sÃ¼rÃ¼kleyip bÄ±rakÄ±n</span>
                    <span class="upload-hint">XML ve JSON dosyalarÄ± kabul edilir</span>
                </label>
                <input type="file" id="xmlFileInput" accept=".xml,.json" hidden>
                <p id="uploadStatus" class="upload-status"></p>
                <div class="local-file-buttons">
                    <button id="loadBothFilesBtn" class="btn btn-primary">Yerel DosyalarÄ± YÃ¼kle (XML + JSON)</button>
                </div>
                <details class="local-file-help">
                    <summary>Yerel dosya eriÅŸimi iÃ§in yardÄ±m</summary>
                    <div class="help-content">
                        <p><strong>âš ï¸ GÃ¼venlik Notu:</strong> Chrome'u Ã¶zel modda Ã§alÄ±ÅŸtÄ±rmak gÃ¼venlik risklerine neden olabilir. Ä°ÅŸiniz bittiÄŸinde normal Chrome'u kullanmaya geri dÃ¶nÃ¼n.</p>
                        <p><strong>Chrome'da yerel dosya eriÅŸimi:</strong></p>
                        <ol>
                            <li>Chrome'u kapatÄ±n</li>
                            <li>KÄ±sayolu saÄŸ tÄ±klayÄ±p "Ã–zellikler" seÃ§in</li>
                            <li>Hedef alanÄ±na ÅŸunu ekleyin: <code>--allow-file-access-from-files</code></li>
                            <li>Ã–rnek: <code>"C:\Program Files\Google\Chrome\Application\chrome.exe" --allow-file-access-from-files</code></li>
                            <li>Chrome'u bu kÄ±sayoldan baÅŸlatÄ±n</li>
                            <li><strong>Ã–nemli:</strong> Ä°ÅŸiniz bittiÄŸinde Chrome'u kapatÄ±p normal ÅŸekilde tekrar aÃ§Ä±n</li>
                        </ol>
                        <p><strong>Ã–nerilen Alternatif:</strong> Python ile yerel sunucu baÅŸlatÄ±n (daha gÃ¼venli):</p>
                        <code>python -m http.server 8000</code>
                        <p>Sonra <code>http://localhost:8000</code> adresini aÃ§Ä±n</p>
                    </div>
                </details>
            </div>
        </section>

        <section class="card muayene-section">
            <div class="print-header" style="display:none;">
                <h1>Revir Muayene Listesi</h1>
                <div class="print-date" id="printDate"></div>
            </div>
            <h2>Muayene Listesi OluÅŸtur</h2>
            <div class="muayene-container">
                <div class="search-wrapper">
                    <input type="text" id="hastaAraInput" class="input-field" placeholder="Hasta adÄ± yazÄ±n..." autocomplete="off">
                    <div id="oneriListesi" class="oneri-listesi"></div>
                </div>
                <div id="muayeneListesi" class="muayene-listesi">
                    <p class="empty-message">HenÃ¼z listeye hasta eklenmedi.</p>
                </div>
                <div class="muayene-actions">
                    <button id="listeTemizleBtn" class="btn btn-danger">Listeyi Temizle</button>
                    <button id="listeYazBtn" class="btn btn-primary">Muayene Listesi Yap</button>
                    <button id="listeKaydetBtn" class="btn btn-success" style="display:none;">Kaydet</button>
                    <button id="listeYazdirBtn" class="btn btn-secondary" style="display:none;">YazdÄ±r</button>
                </div>
                <div id="gruplanmisListe" class="gruplanmis-liste"></div>
            </div>
        </section>
        </div>

        <footer>
            <p>&copy; 2026 Revir. TÃ¼m haklarÄ± saklÄ±dÄ±r.</p>
        </footer>
    </div>

    <!-- 2 HaftalÄ±k Muayene UyarÄ± ModalÄ± -->
    <div id="uyariModal" class="modal-overlay">
        <div class="modal-content">
            <h3 class="modal-title">âš ï¸ Muayene UyarÄ±sÄ±</h3>
            <p id="uyariMesaj" class="modal-message"></p>
            <div class="modal-actions">
                <button id="yineDeEkleBtn" class="btn btn-primary">Yine de Ekle</button>
                <button id="eklemeBtn" class="btn btn-danger">Ekleme</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
